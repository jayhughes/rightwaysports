"use strict";function tooltips(a){a.each(function(){var a=$(this).text();""!=a&&$(this).tooltipster({animation:"fade",content:a})})}function featherlightTooltips(a){var b=$(".featherlight").find(a);b.each(function(){var a=$(this).text();""!=a&&$(this).tooltipster({animation:"fade",content:a})})}function tabBuilder(a){var b=a,c=b.find($(".tab")),d=$("<ul></ul>"),e=$("#selectedDocumentInstructionId"),f=b.data("selected-tab");f||(f=0),c.length>1&&c.each(function(a){var b="tab"+(a+1),c=$(this).data("tab-label"),f=$(this).data("task-id"),g=$('<a href="#'+b+'" class="tooltip">'+c+"</a>"),h=$("<li></li>");$(this).attr("id",b),h.append(g),d.append(h),f&&g.click(function(){e.val(f)})}),b.prepend(d),b.tabs({active:f}),tooltips(b.find(".tooltip"));var g=$(".tab .errors:first").filter(function(a){return $(this)}),h=$(".tab").index(g.closest(".tab"));g.length?b.tabs({active:h}):b.tabs({active:f})}var common=function(a){var b=a.documentElement,c=function(){b.setAttribute("data-useragent",navigator.userAgent)},d=function(){$("header button.user").click(function(){console.log("check"),$(this).toggleClass("active"),$("#user-options").fadeToggle()}),$("html").click(function(a){$(a.target).is("#user-options")||$(a.target).is("button.user.icon")||($("#user-options").fadeOut(),$("header button.user").removeClass("active"))})},e=function(){tooltips($("#language").find(".tooltip")),$("#language-toggle").click(function(){$(this).toggleClass("active"),$("#language ul").fadeToggle()}),$(a).bind("click",function(a){var b=$(a.target);b.parents().is("#language")||($("#language ul").fadeOut(),$("#language-toggle").removeClass("active"))})},f=function(){$("#global-message .close").click(function(){$("#global-message").fadeOut()}),setTimeout(function(){$("#global-message").length>0&&$("#global-message").fadeOut()},4e3)},g=function(){window.sessionTimeOut&&$("#countdown").countdown({until:sessionTimeOut,compact:!0,expiryURL:logoutUrl})},h=function(){$(a).on("mouseenter","textarea",function(a){var b=$(this).offset().top+$(this).outerHeight()-16,c=$(this).offset().left+$(this).outerWidth()-16;$(this).css({cursor:a.pageY>b&&a.pageX>c?"nw-resize":""})}).on("keyup","textarea",function(a){for(;$(this).outerHeight()<this.scrollHeight+parseFloat($(this).css("borderTopWidth"))+parseFloat($(this).css("borderBottomWidth"));)$(this).height($(this).height()+1)})},i=function(){$("html[data-useragent*='Trident']").length?($(".pdfDrop").ezdz({text:"Choose a pdf",accept:function(){$("#submitPDF").click()}}),$(".imageDrop").ezdz({text:"Choose an image",accept:function(){$("#submitImage").click()}}),$("html[data-useragent*='MSIE 10.0']").length&&$(".ie-10-btn").click(function(){$('*[aria-hidden="false"] .pdfDrop').trigger("click")})):($(".pdfDrop").ezdz({text:"Drop a .pdf file",mimeType:"pdf",classes:{main:"dropzone",enter:"enter",reject:"reject",accept:"accept",focus:"focus"},accept:function(){$("#submitPDF").click()},reject:function(a,b){b.mimeType&&$(this).tooltipster({delay:200,theme:"tooltipster-shadow",content:$('<div>The file <span class="error">"'+a.name+'"</span> is not a pdf.</div>')})}}),$(".imageDrop").ezdz({text:"Drop an image file",mimeType:"pdf",classes:{main:"dropzone",enter:"enter",reject:"reject",accept:"accept",focus:"focus"},accept:function(){$("#submitImage").click()},reject:function(a,b){b.mimeType&&$(this).tooltipster({delay:200,theme:"tooltipster-shadow",content:$('<div>The file <span class="error">"'+a.name+'"</span> is not a image.</div>')})}}))},j=function(){var a=$(".tab");a.length&&a.each(function(){var a=$(this).attr("id"),b=$(this).find(".errors").length;b&&$('[aria-controls="'+a+'"]').append('<span class="error-count">'+b+"</span>")})},k=function(){c(),g(),d(),e(),f(),i(),h(),j()};return{init:k}}(document);$(function(){common.init(),0!==$("#inbox").length?($("header form , #user-options form").preventDoubleSubmission(),inbox.init()):($("form").preventDoubleSubmission(),editShipment.init(),dataEntry.init(),distribute.init(),selectDocs.init(),uploadPreview.init(),collaboration.init(),IE.init())});